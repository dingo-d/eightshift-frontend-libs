//
// Variables
//
// You can override the default values by setting the variables in your Sass
// before importing the normalize-scss library.

// The font size set on the root html element.
$n-font-size: 16px !default;

// The base line height determines the basic unit of vertical rhythm.
$n-line-height: 24px !default;

// The length unit in which to output vertical rhythm values.
// Supported values: px, em, rem.
$n-unit: 'em' !default;

// The default font family.
$n-font-family: null !default;

// The font sizes for h1-h6.
$n-h1-font-size: 2    * $n-font-size !default;
$n-h2-font-size: 1.5  * $n-font-size !default;
$n-h3-font-size: 1.17 * $n-font-size !default;
$n-h4-font-size: 1    * $n-font-size !default;
$n-h5-font-size: 0.83 * $n-font-size !default;
$n-h6-font-size: 0.67 * $n-font-size !default;

// The amount lists and blockquotes are indented.
$n-indent-amount: 40px !default;

// The following variable controls whether normalize-scss will output
// font-sizes, line-heights and block-level top/bottom margins that form a basic
// vertical rhythm on the page, which differs from the original Normalize.css.
// However, changing any of the variables above will cause
// $n-normalize-vertical-rhythm to be automatically set to true.
$n-normalize-vertical-rhythm: false !default;

//
// Vertical Rhythm
//
// This is the minimal amount of code needed to create vertical rhythm in our
// CSS. If you are looking for a robust solution, look at the excellent Typey
// library. @see https://github.com/jptaranto/typey

@function normalize-rhythm($value, $relative-to: $n-font-size, $unit: $n-unit) {
	@if unit($value) != px {
		@error "The normalize vertical-rhythm module only supports px inputs. The typey library is better.";
	}
	@if $unit == rem {
		@return math.div($value, $n-font-size) * 1rem;
	}
	@else if $unit == em {
		@return math.div($value, $relative-to) * 1em;
	}
	@else { // $unit == px
		@return $value;
	}
}

@mixin normalize-font-size($value, $relative-to: $n-font-size) {
	@if unit($value) != 'px' {
		@error "normalize-font-size() only supports px inputs. The typey library is better.";
	}
	font-size: normalize-rhythm($value, $relative-to);
}

@mixin normalize-rhythm($property, $values, $relative-to: $n-font-size) {
	$value-list: $values;
	$sep: space;
	@if type-of($values) == 'list' {
		$sep: list-separator($values);
	}
	@else {
		$value-list: append((), $values);
	}

	$normalized-values: ();
	@each $value in $value-list {
		@if unitless($value) and $value != 0 {
			$value: $value * normalize-rhythm($n-line-height, $relative-to);
		}
		$normalized-values: append($normalized-values, $value, $sep);
	}
	#{$property}: $normalized-values;
}

@mixin normalize-margin($values, $relative-to: $n-font-size) {
	@include normalize-rhythm(margin, $values, $relative-to);
}

@mixin normalize-line-height($font-size, $min-line-padding: 2px) {
	$lines: ceil($font-size / $n-line-height);
	// If lines are cramped include some extra leading.
	@if ($lines * $n-line-height - $font-size) < ($min-line-padding * 2) {
		$lines: $lines + 1;
	}
	@include normalize-rhythm(line-height, $lines, $font-size);
}

@mixin normalize() {
	// If we've customized any font variables, we'll need extra properties.
	@if $n-line-height != 24px
		or $n-unit != 'em'
		or $n-h2-font-size != 1.5  * $n-font-size
		or $n-h3-font-size != 1.17 * $n-font-size
		or $n-h4-font-size != 1    * $n-font-size
		or $n-h5-font-size != 0.83 * $n-font-size
		or $n-h6-font-size != 0.67 * $n-font-size {
		$n-normalize-vertical-rhythm: true !global;
	}

	/* Document
	========================================================================== */

	/**
	* 1. Correct the line height in all browsers.
	* 2. Prevent adjustments of font size after orientation changes in
	*    IE on Windows Phone and in iOS.
	*/

	html {
		/* Change the default font family in all browsers (opinionated). */
		font-family: $n-font-family;
		// Correct old browser bug that prevented accessible resizing of text
		// when root font-size is set with px or em.
		font-size: math.div($n-font-size, 16px) * 100%;
		line-height: math.div($n-line-height, $n-font-size) * 1em; /* 1 */
		-ms-text-size-adjust: 100%; /* 2 */
		-webkit-text-size-adjust: 100%; /* 2 */
	}

	/* Sections
	========================================================================== */

	/**
	* Remove the margin in all browsers (opinionated).
	*/

	body {
		margin: 0;
	}

	/**
	* Add the correct display in IE 9-.
	*/

	article,
	aside,
	footer,
	header,
	nav,
	section {
		display: block;
	}

	/**
	* Correct the font size and margin on `h1` elements within `section` and
	* `article` contexts in Chrome, Firefox, and Safari.
	*/

	h1 {
		@include normalize-font-size($n-h1-font-size);
			@include normalize-line-height($n-h1-font-size);

		/* Set 1 unit of vertical rhythm on the top and bottom margins. */
		@include normalize-margin(1 0, $n-h1-font-size);
	}

	h2 {
		@include normalize-font-size($n-h2-font-size);
		@include normalize-line-height($n-h2-font-size);
		@include normalize-margin(1 0, $n-h2-font-size);
	}

	h3 {
		@include normalize-font-size($n-h3-font-size);
		@include normalize-line-height($n-h3-font-size);
		@include normalize-margin(1 0, $n-h3-font-size);
	}

	h4 {
		@include normalize-font-size($n-h4-font-size);
		@include normalize-line-height($n-h4-font-size);
		@include normalize-margin(1 0, $n-h4-font-size);
	}

	h5 {
		@include normalize-font-size($n-h5-font-size);
		@include normalize-line-height($n-h5-font-size);
		@include normalize-margin(1 0, $n-h5-font-size);
	}

	h6 {
		@include normalize-font-size($n-h6-font-size);
		@include normalize-line-height($n-h6-font-size);
		@include normalize-margin(1 0, $n-h6-font-size);
	}


	/* Grouping content
	========================================================================== */

	/**
	* Set 1 unit of vertical rhythm on the top and bottom margin.
	*/

	blockquote {
		@include normalize-margin(1 $n-indent-amount);
	}

	dl,
	ol,
	ul {
		@include normalize-margin(1 0);
	}

	/**
	* Turn off margins on nested lists.
	*/

	ol,
	ul {
		ol,
		ul {
			margin: 0;
		}
	}

	dd {
		margin: 0 0 0 $n-indent-amount;
	}

	ol,
	ul {
		padding: 0 0 0 $n-indent-amount;
	}

	/**
	* Add the correct display in IE 9-.
	*/

	figcaption,
	figure {
		display: block;
	}

	/**
	* Add the correct margin in IE 8.
	*/

	figure {
		@include normalize-margin(1 $n-indent-amount);
	}

	/**
	* 1. Add the correct box sizing in Firefox.
	* 2. Show the overflow in Edge and IE.
	*/

	hr {
		box-sizing: content-box; /* 1 */
		height: 0; /* 1 */
		overflow: visible; /* 2 */
	}

	/**
	* Add the correct display in IE.
	*/

	main {
		display: block;
	}

	/**
	* Set 1 unit of vertical rhythm on the top and bottom margin.
	*/

	p,
	pre {
		@include normalize-margin(1 0);
	}

	/**
	* 1. Correct the inheritance and scaling of font size in all browsers.
	* 2. Correct the odd `em` font sizing in all browsers.
	*/

	pre {
		font-family: monospace, monospace; /* 1 */
		font-size: 1em; /* 2 */
	}

	/* Links
			========================================================================== */

	/**
	* 1. Remove the gray background on active links in IE 10.
	* 2. Remove gaps in links underline in iOS 8+ and Safari 8+.
	*/

	a {
		background-color: transparent; /* 1 */
		-webkit-text-decoration-skip: objects; /* 2 */
	}

	/* Text-level semantics
			========================================================================== */

	/**
	* 1. Remove the bottom border in Chrome 57- and Firefox 39-.
	* 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.
	*/

	abbr[title] {
		border-bottom: none; /* 1 */
		text-decoration: underline; /* 2 */
		text-decoration: underline dotted; /* 2 */
	}

	/**
	* Prevent the duplicate application of `bolder` by the next rule in Safari 6.
	*/

	b,
	strong {
		font-weight: inherit;
	}

	/**
	* Add the correct font weight in Chrome, Edge, and Safari.
	*/

	b,
	strong {
		font-weight: bolder;
	}

	/**
	* 1. Correct the inheritance and scaling of font size in all browsers.
	* 2. Correct the odd `em` font sizing in all browsers.
	*/

	code,
	kbd,
	samp {
		font-family: monospace, monospace; /* 1 */
		font-size: 1em; /* 2 */
	}

	/**
	* Add the correct font style in Android 4.3-.
	*/

	dfn {
		font-style: italic;
	}

	/**
	* Add the correct background and color in IE 9-.
	*/

	mark {
		background-color: #ff0;
		color: #000;
	}

	/**
	* Add the correct font size in all browsers.
	*/

	small {
		font-size: 80%;
	}

	/**
	* Prevent `sub` and `sup` elements from affecting the line height in
	* all browsers.
	*/

	sub,
	sup {
		font-size: 75%;
		line-height: 0;
		position: relative;
		vertical-align: baseline;
	}

	sub {
		bottom: -0.25em;
	}

	sup {
		top: -0.5em;
	}

	/* Embedded content
	========================================================================== */

	/**
	* Add the correct display in IE 9-.
	*/

	audio,
	video {
		display: inline-block;
	}

	/**
	* Add the correct display in iOS 4-7.
	*/

	audio:not([controls]) {
		display: none;
		height: 0;
	}

	/**
	* Remove the border on images inside links in IE 10-.
	*/

	img {
		border-style: none;
	}

	/**
	* Hide the overflow in IE.
	*/

	svg:not(:root) {
		overflow: hidden;
	}

	/* Forms
	========================================================================== */

	/**
	* 1. Change the font styles in all browsers (opinionated).
	* 2. Remove the margin in Firefox and Safari.
	*/

	button,
	input,
	optgroup,
	select,
	textarea {
		font-family: if($n-font-family, $n-font-family, sans-serif); /* 1 */
		font-size: 100%; /* 1 */
		line-height: ($n-line-height / $n-font-size) * 1em; /* 1 */
		margin: 0; /* 2 */
	}

	/**
	* Show the overflow in IE.
	*/

	button {
		overflow: visible;
	}

	/**
	* Remove the inheritance of text transform in Edge, Firefox, and IE.
	* 1. Remove the inheritance of text transform in Firefox.
	*/

	button,
	select { /* 1 */
		text-transform: none;
	}

	/**
	* 1. Prevent a WebKit bug where (2) destroys native `audio` and `video`
	*    controls in Android 4.
	* 2. Correct the inability to style clickable types in iOS and Safari.
	*/

	button,
	html [type="button"], /* 1 */
	[type="reset"],
	[type="submit"] {
		-webkit-appearance: button; /* 2 */
	}

	button,
	[type="button"],
	[type="reset"],
	[type="submit"] {

		/**
		* Remove the inner border and padding in Firefox.
		*/

		&::-moz-focus-inner {
			border-style: none;
			padding: 0;
		}

		/**
		* Restore the focus styles unset by the previous rule.
		*/

		&:-moz-focusring {
			outline: 1px dotted ButtonText;
		}
	}

	/**
	* Show the overflow in Edge.
	*/

	input {
		overflow: visible;
	}

	/**
	* 1. Add the correct box sizing in IE 10-.
	* 2. Remove the padding in IE 10-.
	*/

	[type="checkbox"],
	[type="radio"] {
		box-sizing: border-box; /* 1 */
		padding: 0; /* 2 */
	}

	/**
	* Correct the cursor style of increment and decrement buttons in Chrome.
	*/

	[type="number"]::-webkit-inner-spin-button,
	[type="number"]::-webkit-outer-spin-button {
		height: auto;
	}

	/**
	* 1. Correct the odd appearance in Chrome and Safari.
	* 2. Correct the outline style in Safari.
	*/

	[type="search"] {
		-webkit-appearance: textfield; /* 1 */
		outline-offset: -2px; /* 2 */

		/**
		* Remove the inner padding and cancel buttons in Chrome and Safari on macOS.
		*/

		&::-webkit-search-cancel-button,
		&::-webkit-search-decoration {
			-webkit-appearance: none;
		}
	}

	/**
	* 1. Correct the inability to style clickable types in iOS and Safari.
	* 2. Change font properties to `inherit` in Safari.
	*/

	::-webkit-file-upload-button {
		-webkit-appearance: button; /* 1 */
		font: inherit; /* 2 */
	}

	/**
	* Correct the padding in Firefox.
	*/

	fieldset {
		padding: 0.35em 0.75em 0.625em;
	}

	/**
	* 1. Correct the text wrapping in Edge and IE.
	* 2. Correct the color inheritance from `fieldset` elements in IE.
	* 3. Remove the padding so developers are not caught out when they zero out
	*    `fieldset` elements in all browsers.
	*/

	legend {
		box-sizing: border-box; /* 1 */
		display: table; /* 1 */
		max-width: 100%; /* 1 */
		padding: 0; /* 3 */
		color: inherit; /* 2 */
		white-space: normal; /* 1 */
	}

	/**
	* 1. Add the correct display in IE 9-.
	* 2. Add the correct vertical alignment in Chrome, Firefox, and Opera.
	*/

	progress {
		display: inline-block; /* 1 */
		vertical-align: baseline; /* 2 */
	}

	/**
	* Remove the default vertical scrollbar in IE.
	*/

	textarea {
		overflow: auto;
	}

	/* Interactive
	========================================================================== */

	/*
	* Add the correct display in Edge, IE, and Firefox.
	*/

	details {
		display: block;
	}

	/*
	* Add the correct display in all browsers.
	*/

	summary {
		display: list-item;
	}

	/*
	* Add the correct display in IE 9-.
	*/

	menu {
		display: block;

		/*
		* 1. Set 1 unit of vertical rhythm on the top and bottom margin.
		* 2. Set consistent space for the list style image.
		*/

		@include normalize-margin(1 0); /* 1 */
		padding: 0 0 0 $n-indent-amount; /* 2 */

		/**
		* Turn off margins on nested lists.
		*/

		menu &,
		ol &,
		ul & {
			margin: 0;
		}
	}

	/* Scripting
	========================================================================== */

	/**
	* Add the correct display in IE 9-.
	*/

	canvas {
		display: inline-block;
	}

	/**
	* Add the correct display in IE.
	*/

	template {
		display: none;
	}

	/* Hidden
	========================================================================== */

	/**
	* Add the correct display in IE 10-.
	*/

	[hidden] {
		display: none;
	}
}
